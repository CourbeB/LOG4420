extends layout

block head
  script(type='text/javascript', src='//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js')
  script(type='text/javascript', src='/javascripts/QuizBd.js')
  script(type='text/javascript', src='/javascripts/QuizUser.js')
  script(type='text/javascript', src='/javascripts/quiz.js')
  script(type='text/javascript').
    var bd;
    var user;
    var nbQuestions = 0;
    var domainesChoisis = [];
    var stats;
    $(function () {
      stats = $("section.stats");
      user = new QuizUser();
      // Chargement BD
      $.getJSON("ressources/questions.json", function (data) {
        bd = new QuizBd(data);
        var domaines = [];
        domaines = bd.getDomaines();
          $.each(domaines, function(i, val){
            $("#exam_options > select").append('<option value="'+val+'">'+val+'</option>');
          });
      });

      // Formulaire paramètres examen
      $("#exam").submit(function(event){
        domainesChoisis = $("#exam_options > select").val();
        nbQuestions = bd.getNbQuestions(domainesChoisis);
        if($("#exam_options > input").val() <=nbQuestions) 
          return;
        $("#exam_options > input").css("border-color","red");
        alert("Nombres de questions choisies trop grand, nombre max :" + nbQuestions);
        event.preventDefault();
      });
    
      // Détails stats
      $("#details_link").click(function() {
        afficherHistoExamens(user, $("#details"));
      });
    
      // RaZ stats
      $("#raz_link").click(function() {
        user.raz();
        afficherStats(user, stats, false);
      });
      afficherStats(user, stats, false);
    });

block nav
 ul
     li
       a(href='/') Accueil
     li
       a.active(href='/tableau') Tableau de bord
     li
       a(href='/regles') Règles

block content
  div
    section#details.classDetails
        a.back(href='#')
        section
          h1 Derniers examens
          ul
      section.stats
        h1 Stats
        ul
        a#details_link(href='#details') Détails
        | -
        a#raz_link(href='#') RaZ
      section.questionnaire
        h1 Questionnaires
        h2 Test rapide
        form#test(action='questionRapide.html')
          button(type='submit') Démarrer
        h2 Examen
        form#exam(method='get', action='questionExamen.html')
          #exam_options
            select(size='1', multiple='multiple', name='domaine')
            input(type='text', name='nbQuestions', placeholder='Nombre de questions')
          button(type='submit') Démarrer